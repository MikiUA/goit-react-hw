"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[235],{6470:function(t,n,e){e.d(n,{Z:function(){return a}});var r=e(184);function a(){return(0,r.jsx)("div",{children:"Loading ..."})}},9559:function(t,n,e){e.d(n,{OL:function(){return d},lX:function(){return o},yt:function(){return s}});var r,a,i,u=e(168),c=e(7691),o=c.default.label(r||(r=(0,u.Z)(["\n    display:block;\n    font-style:italic;\n"]))),s=c.default.input(a||(a=(0,u.Z)(["\n    font-size:55%;\n    margin-left:5%;\n"]))),d=c.default.button(i||(i=(0,u.Z)(["\n    display:block;\n    margin-top:1em;\n    margin-left:5%;\n    font-size:40%;\n"])))},652:function(t,n,e){e.d(n,{CR:function(){return o},lh:function(){return s},zf:function(){return d}});var r,a,i,u=e(168),c=e(7691),o=c.default.ul(r||(r=(0,u.Z)(["\nwidth:fit-content;\npadding-right:1em;\nheight:20em;\nborder-left:1px solid black;\noverflow-y:auto;\n"]))),s=c.default.li(a||(a=(0,u.Z)(["\nmargin-top:2%;\nbordewr-left:1px solid black;\npadding-left:0.2em\n"]))),d=c.default.div(i||(i=(0,u.Z)(["\n    display:block;\n    text-align:center;\n    background-color:#dcaaaa;\n    font-size:35%;\n    border-radius:10em;\n    \n    &:hover{\n        background-color:#ee4444;\n        border: 1px solid #aa0000\n    }\n"])))},235:function(t,n,e){e.r(n),e.d(n,{default:function(){return z}});var r,a=e(5048),i=e(3433),u=e(4942),c=e(5273).configureStore,o=e(6793).contactsApi,s=e(4074),d=s.name,l=s.reducer,f=c({reducer:(r={},(0,u.Z)(r,o.reducerPath,o.reducer),(0,u.Z)(r,d,l),r),middleware:function(t){return[].concat((0,i.Z)(t()),[o.middleware])}}),m=e(889),h=e(9439),p=e(2791),g=e(6793),b=e(9559),x=e(6470),y=e(5013),C=e(4074),v=e(184);function j(t){var n=t.contact,e=void 0===n?{}:n,r=(0,p.useState)(e.name||""),i=(0,h.Z)(r,2),u=i[0],c=i[1],o=(0,p.useState)(e.number||""),s=(0,h.Z)(o,2),d=s[0],l=s[1],f=(0,p.useState)(!1),m=(0,h.Z)(f,2),j=m[0],Z=m[1],k=(0,p.useState)(null),E=(0,h.Z)(k,2),z=E[0],A=E[1],L=(0,a.I0)(),S=(0,g.useAddContactMutation)(),w=(0,h.Z)(S,2),I=w[0],M=w[1],T=M.isSuccess,q=M.isLoading,D=M.isError,P=M.error,F=(0,g.useEditContactMutation)(),Q=(0,h.Z)(F,2),U=Q[0],_=Q[1],G=_.isSuccess,O=_.isLoading,X=_.isError,R=_.error;return(0,p.useEffect)((function(){T&&(c(""),l(""),Z(!1))}),[T]),(0,p.useEffect)((function(){G&&L((0,C.resetItem)())}),[G]),(0,p.useEffect)((function(){(q||O)&&Z(!0)}),[q,O]),(0,p.useEffect)((function(){D&&A(P),X&&A(R)}),[D,X,P,R]),(0,v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),A(null),e.id?U({id:e.id,name:u,number:d}):I({name:u,number:d})},children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(b.lX,{htmlFor:"acf-name",children:"\u0406\u043c'\u044f \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443"}),(0,v.jsx)(b.yt,{id:"acf-name",value:u,onChange:function(t){return c(t.target.value)},type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(b.lX,{htmlFor:"acf-num",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440"}),(0,v.jsx)(b.yt,{id:"acf-num",value:d,onChange:function(t){return l(t.target.value)},type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,v.jsx)(b.OL,{disabled:j,type:"submit",children:j?(0,v.jsx)(x.Z,{}):e.id?"\u0417\u0430\u043c\u0456\u043d\u0438\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"}),z?(0,v.jsx)(y.Z,{message:z.message}):""]})}var Z=e(652);function k(t){var n=t.contact,e=n.id,r=n.name,i=n.number,u=(0,a.v9)((function(t){return t.currentlyEditedItem})),c=(0,a.I0)(),o=(0,p.useState)(!1),s=(0,h.Z)(o,2),d=s[0],l=s[1],f=(0,g.useDeleteContactMutation)(),m=(0,h.Z)(f,2),b=m[0],x=m[1],k=x.isLoading,E=x.isError,z=x.error,A=(0,g.useEditContactMutation)(),L=(0,h.Z)(A,2)[1].isLoading;return(0,p.useEffect)((function(){l(u===e)}),[u,e]),(0,v.jsxs)(Z.lh,{children:[d?(0,v.jsx)(j,{contact:{id:e,name:r,number:i}}):(0,v.jsxs)(v.Fragment,{children:[r," :  ",i]}),k?(0,v.jsx)(Z.zf,{children:" Loading... "}):(0,v.jsx)(Z.zf,{onClick:function(){return function(t){b({id:t})}(e)},children:"Delete"}),L?(0,v.jsx)(Z.zf,{children:" Loading... "}):d?(0,v.jsx)(Z.zf,{onClick:function(){return c((0,C.resetItem)())},children:"Cancel"}):(0,v.jsx)(Z.zf,{onClick:function(){return c((0,C.selectItem)(e))},children:"Edit contact"}),E?(0,v.jsx)(y.Z,{title:"deletion error",message:z&&z.message}):""]})}function E(){var t=(0,p.useState)(""),n=(0,h.Z)(t,2),e=n[0],r=n[1],a=(0,g.useGetContactsQuery)(),i=a.data,u=a.isLoading;return(0,v.jsxs)("div",{children:[(0,v.jsx)(b.yt,{type:"text",value:e,placeholder:"find a contact",onChange:function(t){return r(t.target.value.toUpperCase())}}),(0,v.jsx)(Z.CR,{children:u?(0,v.jsx)(x.Z,{}):i.filter((function(t){return!!t.name.toUpperCase().includes(e)||!!t.number.toString().includes(e)})).map((function(t){return(0,v.jsx)(k,{contact:t},t.id)}))})]})}function z(){return(0,v.jsx)(a.zt,{store:f,children:(0,v.jsxs)(m.Z,{type:"task",title:"\u041a\u043d\u0438\u0433\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432",children:[(0,v.jsx)(m.Z,{label:"Add contact",children:(0,v.jsx)(j,{})}),(0,v.jsx)(m.Z,{label:"Contact list",children:(0,v.jsx)(E,{})})]})})}},6793:function(t,n,e){e.r(n),e.d(n,{contactsApi:function(){return o},useAddContactMutation:function(){return d},useDeleteContactMutation:function(){return f},useEditContactMutation:function(){return l},useGetContactsQuery:function(){return s}});var r=e(5987),a=e(1465),i=e(255),u=["id"],c="/contacts",o=(0,a.LC)({reducerPath:"contacts",baseQuery:(0,i.ni)({baseUrl:"https://640d9283b07afc3b0db06bfb.mockapi.io"}),tagTypes:["contacts"],endpoints:function(t){return{getContacts:t.query({query:function(){return c},providesTags:["contacts"]}),addContact:t.mutation({query:function(t){return{url:c,method:"POST",body:t}},invalidatesTags:["contacts"]}),deleteContact:t.mutation({query:function(t){return{url:"/contacts/"+t.id,method:"DELETE"}},invalidatesTags:["contacts"]}),editContact:t.mutation({query:function(t){return{url:"/contacts/"+t.id,method:"PUT",body:(0,r.Z)(t,u)}},invalidatesTags:["contacts"]})}}}),s=o.useGetContactsQuery,d=o.useAddContactMutation,l=o.useEditContactMutation,f=o.useDeleteContactMutation},4074:function(t,n,e){e.r(n),e.d(n,{name:function(){return a},reducer:function(){return c},resetItem:function(){return u},selectItem:function(){return i}});var r=e(5273),a="currentlyEditedItem",i=(0,r.createAction)(a+"/selectItem"),u=(0,r.createAction)(a+"/resetItem");function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(console.log("action",n),n.type){case i.type:return n.payload;case u.type:return null;default:return t}}}}]);
//# sourceMappingURL=235.3f5f1c30.chunk.js.map