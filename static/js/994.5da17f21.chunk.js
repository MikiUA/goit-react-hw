"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[994],{9559:function(t,e,n){n.d(e,{OL:function(){return d},lX:function(){return o},yt:function(){return s}});var r,a,i,u=n(168),c=n(6444),o=c.default.label(r||(r=(0,u.Z)(["\n    display:block;\n    font-style:italic;\n"]))),s=c.default.input(a||(a=(0,u.Z)(["\n    font-size:55%;\n    margin-left:5%;\n"]))),d=c.default.button(i||(i=(0,u.Z)(["\n    display:block;\n    margin-top:1em;\n    margin-left:5%;\n    font-size:40%;\n"])))},652:function(t,e,n){n.d(e,{CR:function(){return o},lh:function(){return s},zf:function(){return d}});var r,a,i,u=n(168),c=n(6444),o=c.default.ul(r||(r=(0,u.Z)(["\nwidth:fit-content;\npadding-right:1em;\nheight:20em;\nborder-left:1px solid black;\noverflow-y:auto;\n"]))),s=c.default.li(a||(a=(0,u.Z)(["\nmargin-top:2%;\nbordewr-left:1px solid black;\npadding-left:0.2em\n"]))),d=c.default.div(i||(i=(0,u.Z)(["\n    display:block;\n    text-align:center;\n    background-color:#dcaaaa;\n    font-size:35%;\n    border-radius:10em;\n    \n    &:hover{\n        background-color:#ee4444;\n        border: 1px solid #aa0000\n    }\n"])))},1994:function(t,e,n){n.r(e),n.d(e,{default:function(){return z}});var r,a=n(5048),i=n(3433),u=n(4942),c=n(5273).configureStore,o=n(6793).contactsApi,s=n(4074),d=s.name,l=s.reducer,f=c({reducer:(r={},(0,u.Z)(r,o.reducerPath,o.reducer),(0,u.Z)(r,d,l),r),middleware:function(t){return[].concat((0,i.Z)(t()),[o.middleware])}}),m=n(889),h=n(9439),p=n(2791),g=n(6793),b=n(9559),x=n(184);function y(){return(0,x.jsx)("div",{children:"Loading ..."})}var C=n(5013),v=n(4074);function j(t){var e=t.contact,n=void 0===e?{}:e,r=(0,p.useState)(n.name||""),i=(0,h.Z)(r,2),u=i[0],c=i[1],o=(0,p.useState)(n.number||""),s=(0,h.Z)(o,2),d=s[0],l=s[1],f=(0,p.useState)(!1),m=(0,h.Z)(f,2),j=m[0],Z=m[1],k=(0,p.useState)(null),E=(0,h.Z)(k,2),z=E[0],A=E[1],L=(0,a.I0)(),S=(0,g.useAddContactMutation)(),w=(0,h.Z)(S,2),I=w[0],M=w[1],T=M.isSuccess,q=M.isLoading,D=M.isError,P=M.error,F=(0,g.useEditContactMutation)(),Q=(0,h.Z)(F,2),U=Q[0],_=Q[1],G=_.isSuccess,O=_.isLoading,X=_.isError,R=_.error;return(0,p.useEffect)((function(){T&&(c(""),l(""),Z(!1))}),[T]),(0,p.useEffect)((function(){G&&L((0,v.resetItem)())}),[G]),(0,p.useEffect)((function(){(q||O)&&Z(!0)}),[q,O]),(0,p.useEffect)((function(){D&&A(P),X&&A(R)}),[D,X,P,R]),(0,x.jsxs)("form",{onSubmit:function(t){t.preventDefault(),A(null),n.id?U({id:n.id,name:u,number:d}):I({name:u,number:d})},children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(b.lX,{htmlFor:"acf-name",children:"\u0406\u043c'\u044f \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443"}),(0,x.jsx)(b.yt,{id:"acf-name",value:u,onChange:function(t){return c(t.target.value)},type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)(b.lX,{htmlFor:"acf-num",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440"}),(0,x.jsx)(b.yt,{id:"acf-num",value:d,onChange:function(t){return l(t.target.value)},type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,x.jsx)(b.OL,{disabled:j,type:"submit",children:j?(0,x.jsx)(y,{}):n.id?"\u0417\u0430\u043c\u0456\u043d\u0438\u0442\u0438":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"}),z?(0,x.jsx)(C.Z,{message:z.message}):""]})}var Z=n(652);function k(t){var e=t.contact,n=e.id,r=e.name,i=e.number,u=(0,a.v9)((function(t){return t.currentlyEditedItem})),c=(0,a.I0)(),o=(0,p.useState)(!1),s=(0,h.Z)(o,2),d=s[0],l=s[1],f=(0,g.useDeleteContactMutation)(),m=(0,h.Z)(f,2),b=m[0],y=m[1],k=y.isLoading,E=y.isError,z=y.error,A=(0,g.useEditContactMutation)(),L=(0,h.Z)(A,2)[1].isLoading;return(0,p.useEffect)((function(){l(u===n)}),[u,n]),(0,x.jsxs)(Z.lh,{children:[d?(0,x.jsx)(j,{contact:{id:n,name:r,number:i}}):(0,x.jsxs)(x.Fragment,{children:[r," :  ",i]}),k?(0,x.jsx)(Z.zf,{children:" Loading... "}):(0,x.jsx)(Z.zf,{onClick:function(){return function(t){b({id:t})}(n)},children:"Delete"}),L?(0,x.jsx)(Z.zf,{children:" Loading... "}):d?(0,x.jsx)(Z.zf,{onClick:function(){return c((0,v.resetItem)())},children:"Cancel"}):(0,x.jsx)(Z.zf,{onClick:function(){return c((0,v.selectItem)(n))},children:"Edit contact"}),E?(0,x.jsx)(C.Z,{title:"deletion error",message:z&&z.message}):""]})}function E(){var t=(0,p.useState)(""),e=(0,h.Z)(t,2),n=e[0],r=e[1],a=(0,g.useGetContactsQuery)(),i=a.data,u=a.isLoading;return(0,x.jsxs)("div",{children:[(0,x.jsx)(b.yt,{type:"text",value:n,placeholder:"find a contact",onChange:function(t){return r(t.target.value.toUpperCase())}}),(0,x.jsx)(Z.CR,{children:u?(0,x.jsx)(y,{}):i.filter((function(t){return!!t.name.toUpperCase().includes(n)||!!t.number.toString().includes(n)})).map((function(t){return(0,x.jsx)(k,{contact:t},t.id)}))})]})}function z(){return(0,x.jsx)(a.zt,{store:f,children:(0,x.jsxs)(m.Z,{type:"task",title:"\u041a\u043d\u0438\u0433\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432",children:[(0,x.jsx)(m.Z,{label:"Add contact",children:(0,x.jsx)(j,{})}),(0,x.jsx)(m.Z,{label:"Contact list",children:(0,x.jsx)(E,{})})]})})}},6793:function(t,e,n){n.r(e),n.d(e,{contactsApi:function(){return o},useAddContactMutation:function(){return d},useDeleteContactMutation:function(){return f},useEditContactMutation:function(){return l},useGetContactsQuery:function(){return s}});var r=n(4925),a=n(1465),i=n(255),u=["id"],c="/contacts",o=(0,a.LC)({reducerPath:"contacts",baseQuery:(0,i.ni)({baseUrl:"https://640d9283b07afc3b0db06bfb.mockapi.io"}),tagTypes:["contacts"],endpoints:function(t){return{getContacts:t.query({query:function(){return c},providesTags:["contacts"]}),addContact:t.mutation({query:function(t){return{url:c,method:"POST",body:t}},invalidatesTags:["contacts"]}),deleteContact:t.mutation({query:function(t){return{url:"/contacts/"+t.id,method:"DELETE"}},invalidatesTags:["contacts"]}),editContact:t.mutation({query:function(t){return{url:"/contacts/"+t.id,method:"PUT",body:(0,r.Z)(t,u)}},invalidatesTags:["contacts"]})}}}),s=o.useGetContactsQuery,d=o.useAddContactMutation,l=o.useEditContactMutation,f=o.useDeleteContactMutation},4074:function(t,e,n){n.r(e),n.d(e,{name:function(){return a},reducer:function(){return c},resetItem:function(){return u},selectItem:function(){return i}});var r=n(5273),a="currentlyEditedItem",i=(0,r.createAction)(a+"/selectItem"),u=(0,r.createAction)(a+"/resetItem");function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(console.log("action",e),e.type){case i.type:return e.payload;case u.type:return null;default:return t}}}}]);
//# sourceMappingURL=994.5da17f21.chunk.js.map